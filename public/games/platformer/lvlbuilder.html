<html>
	<head>
		<script src="./lvl.js"></script>
		<script>
			const level = new lvl('build');
			var darkbox;
			window.onload = function(){
				document.getElementById('placeholder').appendChild(level.generateBoard());
				darkbox = document.getElementById('dark');
				darkbox.onchange = function(){
					level.setDark(!level.setDarkdark);
				}
			}
			function clickblock(event){
				var id = event.target.id;
				if((level.encode[id] != '00' && level.encode[id]) || id == 'delete'){
					level.board.style.cursor = 'url("./' + id + '25x25.png"), auto';
				}
				if(id == level.active){
					build.style.cursor = 'default';
					id = null;
				}
				event.target.style.outline = "5px dotted powderblue";
				if(level.active){
					document.getElementById(level.active).style.outline = '0px';
				}
				level.active = id;
			}
			function exportlvl(){
				document.getElementById('interface').value = level.export();
			}
			function downloadlvl(){
				var textToSave = (level.export());
				var hiddenElement = document.createElement('a');
				hiddenElement.href = 'data:attachment/text,' + encodeURI(textToSave);
				hiddenElement.target = '_blank';
				hiddenElement.download = 'mylvl.txt';
				hiddenElement.click();
			}
			function importlvl(){
				var data = document.getElementById('interface').value;
				level.import(data);
			}
			window.ondragstart = function(){
				return false;	
			}
			level.ondarkchange = function(value){
				darkbox.checked = value;
			}
		</script>
		<style>
			* {
    				-webkit-touch-callout:none;
    				-webkit-user-select:none;
  				-moz-user-select:none;
    				-ms-user-select:none;
    				user-select:none;
			}
			img{
				width: 50px;
				height: 50px;
			}
		</style>
	</head>
	<body id = "body">
		<div style="position:absolute;right:10px;top:10px;height:450px;width:104px;outline: 1px solid black; background-image: url('./background.png');">
			<img src="./block.png" onclick="clickblock(event)" id = "block" alt = "block"/>
			<img src="./block_key.png" onclick="clickblock(event)" id = "block_key" alt = "block_key"/>
			<img src="./item_key.png" onclick="clickblock(event)" id = "item_key" alt = "item_key"/>
			<img src="./decoration_scaffold.png" onclick="clickblock(event)" id = "decoration_scaffold" alt = "decoration_scaffold"/>
			<img src="./decoration_sconce.png" onclick="clickblock(event)" id = "decoration_sconce" alt = "decoration_sconce"/>
			<img src="./toggleblocksolid.png" onclick="clickblock(event)" id = "toggleblocksolid" alt = "toggleblocksolid"/>
			<img src="./toggleblockphase.png" onclick="clickblock(event)" id = "toggleblockphase" alt = "toggleblockphase"/>
			<img src="./switch.png" onclick="clickblock(event)" id = "switch" alt = "switch"/>
			<!--<img src="./switchceiling.png"onclick="clickblock(event)" id = "switchceiling" alt = "switchceiling"/>-->
			<img src="./exit.png" onclick="clickblock(event)" id = "exit" alt = "exit"/>
			<!--<img  onclick="clickblock(event)" id = "secretexit" alt = "secretexit"/>
			<img  onclick="clickblock(event)" id = "wirered" alt = "wirered"/>-->
			<img src="./powerupburrow.png" onclick="clickblock(event)" id = "powerupburrow" alt = "powerupburrow"/>
			<!--<img  onclick="clickblock(event)" id = "powerupgravity" alt = "powerupgravity"/>-->
			<img src="./main.png" onclick="clickblock(event)" id = "main" alt = "main"/>
			<img src="./delete.png" onclick="clickblock(event)" id = "delete" alt = "delete"/>
		</div>
		<div id="placeholder"></div>
		<div style="bottom:10px;outline:2px solid black;position:absolute;width:800px;">
			<button onclick="exportlvl()">Export</button>
			<button onclick="importlvl()">Import</button>
			<button onclick="downloadlvl()">Download</button>
			<textarea id="interface" style="width:400px"></textarea>
			<input id="dark" type="checkbox">Dark
		</div>
		<h2>NOTES:</h2>
		<ul>
			<li>W.I.P</li>
			<li>Dark is read only. Cannot set level to dark.</li>
		</ul>
	</body>
</html>
