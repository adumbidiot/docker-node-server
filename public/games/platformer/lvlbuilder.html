<html>
	<head>
		<script src="./lvl.js"></script>
		<script>
			var active = null;
			const level = new lvl('build');
			window.onload = function(){
				document.getElementById('placeholder').appendChild(level.generateBoard());
			}
			function clickblock(event){
				var main = document.getElementById('main');
				var id = event.target.id;
				switch(id){
					case "block":
						build.style.cursor = 'url("./block25x25.png"), auto';
						break;
					case "delete":
						build.style.cursor = 'url("./delete25x25.png"), auto';
						break;
					case "block_key":
						build.style.cursor = 'url("./block_key25x25.png"), auto';
						break;
					case "item_key":
						//main.style.cursor = 'url("./item_key25x25.png"), auto';
						break; 
					case "decoration_scaffold":
						//main.style.cursor = 'url("./decoration_scaffold25x25.png"), auto';
						break; 
				}
				if(id == active){
					build.style.cursor = 'default';
					id = null;
				}
				event.target.style.border= "5px solid transparent";
				if(active){
					document.getElementById(active).style.border = '0px';
				}
				active = id;
			}
			function exportlvl(){
				document.getElementById('interface').value = level.export();
				
				//var textToSave = (level.export());

				//var hiddenElement = document.createElement('a');

				//hiddenElement.href = 'data:attachment/text,' + encodeURI(textToSave);
				//hiddenElement.target = '_blank';
				//hiddenElement.download = 'myFile.txt';
				//hiddenElement.click();
			}
			function importlvl(){
				var data = document.getElementById('interface').value;
				level.import(data);
			}
		</script>
		<style>
			* {
    				-webkit-touch-callout:none;
    				-webkit-user-select:none;
  				-moz-user-select:none;
    				-ms-user-select:none;
    				user-select:none;
			}
			img{
				width: 50px;
				height: 50px;
			}
		</style>
	</head>
	<body id = "body">
		<div style="position:absolute;right:10px;top:10px;height:100%;width:50px;border: 1px solid black; background-image: url('./background.png');">
			<img src="./block.png" onclick="clickblock(event)" id = "block"/>
			<img src="./block_key.png" onclick="clickblock(event)" id = "block_key"/>
			<img src="./item_key.png" onclick="clickblock(event)" id = "item_key"/>
			<img src="./decoration_scaffold.png" onclick="clickblock(event)" id = "decoration_scaffold"/>
			<img src="./main.png" onclick="clickblock(event)" id = "main"/>
			<img src="./delete.png" onclick="clickblock(event)" id = "delete"/>
		</div>
		<div id="placeholder"></div>
		<div style="bottom:10px;border:2px solid black;position:absolute;">
			<button onclick="exportlvl()">Export</button>
			<button onclick="importlvl()">Import</button>
			<textarea id="interface"></textarea>
		</div>
	</body>
</html>
